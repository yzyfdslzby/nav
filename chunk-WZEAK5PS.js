import{a as Ve,b as $e,c as De}from"./chunk-5GAFRWYH.js";import{a as Le}from"./chunk-MG3LXEVQ.js";import{h as We}from"./chunk-Y3WW6QB4.js";import"./chunk-JJC3OFEX.js";import{a as Ne}from"./chunk-6LY5ZCP2.js";import{b as Ce}from"./chunk-J74MWVJV.js";import{a as ze}from"./chunk-W6RIXUJW.js";import{a as _e,b as be}from"./chunk-GTTO2IDN.js";import"./chunk-77SX2FZ5.js";import{b as v,d as y}from"./chunk-XJM7XE4Z.js";import"./chunk-XIXMY44S.js";import{d as we,e as ve,f as ge,g as Ie,h as Te,i as Se,j as ke,k as ye,l as Ee}from"./chunk-ZEWFXEAZ.js";import"./chunk-NE6I36Z4.js";import{c as re,e as ae,i as se,j as le,k as ce,l as me,m as he}from"./chunk-SBTNCR4W.js";import"./chunk-L746BZOG.js";import{F as fe,I as ue}from"./chunk-2VYTDTB6.js";import{i as oe}from"./chunk-D4CHICAV.js";import{a as q,b as X,c as Z}from"./chunk-2FI2ULKH.js";import"./chunk-MMI2JXXA.js";import{b as de}from"./chunk-P5GLZMPC.js";import{b as Q}from"./chunk-G23DO4DM.js";import{$ as I,Ab as ie,Hb as pe,Wb as xe,X as N,Z as P,mb as ee,pb as te,zb as ne}from"./chunk-6FSWSLBI.js";import{$d as k,Ac as $,Bd as A,Ca as m,Cb as V,Cd as F,Da as h,Ib as u,Ic as D,Id as B,Ob as l,Sd as U,Ud as R,Wd as H,ac as r,ae as j,bc as a,be as G,cc as w,ee as J,f as Me,fe as Y,gc as g,ge as K,ie as f,jc as p,lc as _,nb as W,nd as L,od as O,qb as i,vb as S,wd as M,xc as d,yc as b,zc as C}from"./chunk-AQE6MPL4.js";var Oe=Me(Ne());var Pe=c=>({count:c});function Ae(c,n){if(c&1){let e=g();r(0,"button",10),p("click",function(){m(e);let o=_();return h(o.handleSync())}),d(1),a()}if(c&2){let e=_();l("nzLoading",e.syncLoading),i(),C(" ",e.$t("_save")," ")}}function Fe(c,n){if(c&1){let e=g();r(0,"button",11),p("click",function(){m(e);let o=_();return h(o.handleReset())}),d(1),a()}if(c&2){let e=_();i(),C(" ",e.$t("_resetInitData")," ")}}function Be(c,n){c&1&&w(0,"i",42)}function Ue(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",17),p("nzCheckedChange",function(o){let s=m(e).$implicit,x=_(2);return h(x.onItemChecked(s.title,o))}),a(),r(2,"td"),w(3,"app-logo",36),a(),r(4,"td"),d(5),a(),r(6,"td"),u(7,Be,1,0,"i",37),a(),r(8,"td",38)(9,"a",39),p("click",function(){let o=m(e).index,s=_(2);return h(s.moveOneUp(o))}),d(10),a(),r(11,"a",40),p("click",function(){let o=m(e).index,s=_(2);return h(s.moveOneDown(o))}),d(12),a(),r(13,"a",40),p("click",function(){let o=m(e),s=o.$implicit,x=o.index,z=_(2);return h(z.handleEditBtn(s,x))}),d(14),a(),r(15,"a",41),p("nzOnConfirm",function(){let o=m(e).index,s=_(2);return h(s.handleConfirmDelOne(o))}),d(16),a()()()}if(c&2){let e=n.$implicit,t=_(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title)),i(2),l("src",e.icon||"")("name",e.title),i(2),b(e.title),i(2),l("ngIf",e.ownVisible),i(3),b(t.$t("_moveUp")),i(2),b(t.$t("_moveDown")),i(2),b(t.$t("_edit")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function Re(c,n){if(c&1&&w(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function He(c,n){c&1&&w(0,"i",42)}function je(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",17),p("nzCheckedChange",function(o){let s=m(e).$implicit,x=_(2);return h(x.onItemChecked(s.title,o))}),a(),r(2,"td"),w(3,"app-logo",36),a(),r(4,"td"),d(5),a(),r(6,"td"),u(7,He,1,0,"i",37),a(),r(8,"td",38)(9,"a",39),p("click",function(){let o=m(e).index,s=_(2);return h(s.moveTwoUp(o))}),d(10),a(),r(11,"a",40),p("click",function(){let o=m(e).index,s=_(2);return h(s.moveTwoDown(o))}),d(12),a(),r(13,"a",40),p("click",function(){let o=m(e),s=o.$implicit,x=o.index,z=_(2);return h(z.handleEditBtn(s,x))}),d(14),a(),r(15,"a",40),p("click",function(){let o=m(e),s=o.$implicit,x=o.index,z=_(2);return h(z.openMoveWebModal(s,x,2))}),d(16),a(),r(17,"a",41),p("nzOnConfirm",function(){let o=m(e).index,s=_(2);return h(s.handleConfirmDelTwo(o))}),d(18),a()()()}if(c&2){let e=n.$implicit,t=_(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title)),i(2),l("src",e.icon||"")("name",e.title),i(2),b(e.title),i(2),l("ngIf",e.ownVisible),i(3),b(t.$t("_moveUp")),i(2),b(t.$t("_moveDown")),i(2),b(t.$t("_edit")),i(2),b(t.$t("_move")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function Ge(c,n){if(c&1&&w(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function Je(c,n){if(c&1&&w(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function Ye(c,n){c&1&&w(0,"i",42)}function Ke(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",17),p("nzCheckedChange",function(o){let s=m(e).$implicit,x=_(2);return h(x.onItemChecked(s.title,o))}),a(),r(2,"td"),w(3,"app-logo",36),a(),r(4,"td"),d(5),a(),r(6,"td"),u(7,Ye,1,0,"i",37),a(),r(8,"td",38)(9,"a",39),p("click",function(){let o=m(e).index,s=_(2);return h(s.moveThreeUp(o))}),d(10),a(),r(11,"a",40),p("click",function(){let o=m(e).index,s=_(2);return h(s.moveThreeDown(o))}),d(12),a(),r(13,"a",40),p("click",function(){let o=m(e),s=o.$implicit,x=o.index,z=_(2);return h(z.handleEditBtn(s,x))}),d(14),a(),r(15,"a",40),p("click",function(){let o=m(e),s=o.$implicit,x=o.index,z=_(2);return h(z.openMoveWebModal(s,x,3))}),d(16),a(),r(17,"a",41),p("nzOnConfirm",function(){let o=m(e).index,s=_(2);return h(s.handleConfirmDelThree(o))}),d(18),a()()()}if(c&2){let e=n.$implicit,t=_(2);i(),l("nzChecked",t.setOfCheckedId.has(e.title)),i(2),l("src",e.icon||"")("name",e.title),i(2),b(e.title),i(2),l("ngIf",e.ownVisible),i(3),b(t.$t("_moveUp")),i(2),b(t.$t("_moveDown")),i(2),b(t.$t("_edit")),i(2),b(t.$t("_move")),i(),l("nzPopconfirmTitle",t.$t("_delWarn")),i(),C(" ",t.$t("_del")," ")}}function qe(c,n){if(c&1&&w(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function Qe(c,n){if(c&1&&w(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function Xe(c,n){if(c&1&&w(0,"nz-option",43),c&2){let e=n.$implicit;l("nzLabel",e.title)("nzValue",e.title)}}function Ze(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),p("click",function(){m(e);let o=_().index,s=_(2);return h(s.moveWebUp(o))}),d(2),a()()}if(c&2){let e=_(3);i(2),b(e.$t("_moveUp"))}}function et(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),p("click",function(){m(e);let o=_().index,s=_(2);return h(s.moveWebDown(o))}),d(2),a()()}if(c&2){let e=_(3);i(2),b(e.$t("_moveDown"))}}function tt(c,n){if(c&1){let e=g();r(0,"div")(1,"a",39),p("click",function(){m(e);let o=_(),s=o.$implicit,x=o.index,z=_(2);return h(z.openMoveWebModal(s,x))}),d(2),a()()}if(c&2){let e=_(3);i(2),b(e.$t("_move"))}}function nt(c,n){c&1&&w(0,"span",52)}function it(c,n){if(c&1&&w(0,"app-logo",36),c&2){let e=_().$implicit;l("src",e.icon)("name",e.name)}}function ot(c,n){if(c&1&&w(0,"tag-list",53),c&2){let e=_().$implicit;l("data",e.tags)}}function rt(c,n){c&1&&w(0,"i",42)}function at(c,n){if(c&1){let e=g();r(0,"tr")(1,"td",17),p("nzCheckedChange",function(o){let s=m(e).$implicit,x=_(2);return h(x.onItemChecked(s.name,o))}),a(),r(2,"td",44),u(3,Ze,3,1,"div",45)(4,et,3,1,"div",45),r(5,"a",39),p("click",function(){let o=m(e).$implicit,s=_(2);return h(s.openEditModal(o))}),d(6),a(),u(7,tt,3,1,"div",45),r(8,"a",46),p("nzOnConfirm",function(){let o=m(e).$implicit,s=_(2);return h(s.handleConfirmDelWeb(o))}),d(9),a()(),r(10,"td"),u(11,nt,1,0,"span",47),a(),r(12,"td"),u(13,it,1,2,"app-logo",48),a(),r(14,"td")(15,"a",49),d(16),a()(),r(17,"td"),u(18,ot,1,1,"tag-list",50),a(),r(19,"td"),u(20,rt,1,0,"i",37),a(),r(21,"td")(22,"pre",51),d(23),a()(),r(24,"th",35),d(25),a()()}if(c&2){let e=n.$implicit,t=_(2);i(),l("nzChecked",t.setOfCheckedId.has(e.name)),i(2),l("ngIf",t.errorWebs.length<=0),i(),l("ngIf",t.errorWebs.length<=0),i(2),b(t.$t("_edit")),i(),l("ngIf",t.errorWebs.length<=0),i(),l("nzPopconfirmTitle",t.$t("_confirmDel")),i(),C(" ",t.$t("_del")," "),i(2),l("ngIf",e.ok===!1),i(2),l("ngIf",e.icon),i(2),l("href",e.url,W),i(),b(e.name),i(2),l("ngIf",e.tags),i(2),l("ngIf",e.ownVisible),i(3),b(e.desc),i(2),b(e.breadcrumb)}}function st(c,n){if(c&1){let e=g();r(0,"nz-tabset",12),p("nzSelectedIndexChange",function(o){m(e);let s=_();return h(s.onTabChange(o))}),r(1,"nz-tab",13)(2,"button",14),p("click",function(){m(e);let o=_();return h(o.toggleCreateModal())}),d(3),a(),r(4,"button",15),p("nzOnConfirm",function(){m(e);let o=_();return h(o.onBatchDelete(1))}),d(5),a(),r(6,"nz-table",16,0)(9,"thead")(10,"tr")(11,"th",17),p("nzCheckedChange",function(o){m(e);let s=_();return h(s.onAllChecked(o,1))}),a(),r(12,"th"),d(13),a(),r(14,"th"),d(15),a(),r(16,"th"),d(17),a(),r(18,"th"),d(19),a()()(),r(20,"tbody"),u(21,Ue,17,10,"tr",18),a()()(),r(22,"nz-tab",13)(23,"nz-select",19),p("ngModelChange",function(o){m(e);let s=_();return h(s.hanldeOneSelect(o))}),u(24,Re,1,2,"nz-option",20),a(),r(25,"button",21),p("click",function(){m(e);let o=_();return h(o.toggleCreateModal())}),d(26),a(),r(27,"button",15),p("nzOnConfirm",function(){m(e);let o=_();return h(o.onBatchDelete(2))}),d(28),a(),r(29,"nz-table",16,0)(32,"thead")(33,"tr")(34,"th",17),p("nzCheckedChange",function(o){m(e);let s=_();return h(s.onAllChecked(o,2))}),a(),r(35,"th"),d(36),a(),r(37,"th"),d(38),a(),r(39,"th"),d(40),a(),r(41,"th"),d(42),a()()(),r(43,"tbody"),u(44,je,19,11,"tr",18),a()()(),r(45,"nz-tab",13)(46,"nz-select",22),p("ngModelChange",function(o){m(e);let s=_();return h(s.hanldeOneSelect(o))}),u(47,Ge,1,2,"nz-option",20),a(),r(48,"nz-select",23),p("ngModelChange",function(o){m(e);let s=_();return h(s.hanldeTwoSelect(o))}),u(49,Je,1,2,"nz-option",20),a(),r(50,"button",21),p("click",function(){m(e);let o=_();return h(o.toggleCreateModal())}),d(51),a(),r(52,"button",15),p("nzOnConfirm",function(){m(e);let o=_();return h(o.onBatchDelete(3))}),d(53),a(),r(54,"nz-table",16,0)(57,"thead")(58,"tr")(59,"th",17),p("nzCheckedChange",function(o){m(e);let s=_();return h(s.onAllChecked(o,3))}),a(),r(60,"th"),d(61),a(),r(62,"th"),d(63),a(),r(64,"th"),d(65),a(),r(66,"th"),d(67),a()()(),r(68,"tbody"),u(69,Ke,19,11,"tr",18),a()()(),r(70,"nz-tab",13)(71,"nz-select",24),p("ngModelChange",function(o){m(e);let s=_();return h(s.hanldeOneSelect(o))}),u(72,qe,1,2,"nz-option",20),a(),r(73,"nz-select",25),p("ngModelChange",function(o){m(e);let s=_();return h(s.hanldeTwoSelect(o))}),u(74,Qe,1,2,"nz-option",20),a(),r(75,"nz-select",25),p("ngModelChange",function(o){m(e);let s=_();return h(s.hanldeThreeSelect(o))}),u(76,Xe,1,2,"nz-option",20),a(),r(77,"button",26),p("click",function(){m(e);let o=_();return h(o.openCreateWebModal())}),d(78),a(),r(79,"button",27),p("click",function(){m(e);let o=_();return h(o.getAllErrorWeb())}),d(80),a(),r(81,"button",28),p("nzOnConfirm",function(){m(e);let o=_();return h(o.onBatchDelete(4))}),d(82),a(),r(83,"nz-table",16,0)(86,"thead")(87,"tr")(88,"th",29),p("nzCheckedChange",function(o){m(e);let s=_();return h(s.onAllChecked(o,4))}),a(),r(89,"th",30),d(90),a(),r(91,"th",31),d(92),a(),r(93,"th",32),d(94),a(),r(95,"th",33),d(96),a(),r(97,"th",33),d(98),a(),r(99,"th",34),d(100),a(),r(101,"th",35),d(102),a(),r(103,"th",35),d(104),a()()(),r(105,"tbody"),u(106,at,26,15,"tr",18),a()()()()}if(c&2){let e=_();l("nzSelectedIndex",e.tabActive),i(),l("nzTitle",e.$t("_mgr1")),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.websiteList)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),b(e.$t("_icon")),i(2),b(e.$t("_tagName")),i(2),b(e.$t("_onlyOwnVisible")),i(2),b(e.$t("_action")),i(2),l("ngForOf",e.websiteList),i(),l("nzTitle",e.$t("_mgr2")),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.twoTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),b(e.$t("_icon")),i(2),b(e.$t("_tagName")),i(2),b(e.$t("_onlyOwnVisible")),i(2),b(e.$t("_action")),i(2),l("ngForOf",e.twoTableData),i(),l("nzTitle",e.$t("_mgr3")),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(),l("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),l("ngForOf",e.twoTableData),i(2),C(" ",e.$t("_addTag")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.threeTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),b(e.$t("_icon")),i(2),b(e.$t("_tagName")),i(2),b(e.$t("_onlyOwnVisible")),i(2),b(e.$t("_action")),i(2),l("ngForOf",e.threeTableData),i(),l("nzTitle",e.$t("_mgrWeb")+"\uFF08"+e.internal.loginViewCount+"\uFF09"),i(),l("ngModel",e.oneSelect)("nzPlaceHolder",e.$t("_sel1")),i(),l("ngForOf",e.websiteList),i(),l("ngModel",e.twoSelect)("nzPlaceHolder",e.$t("_sel2")),i(),l("ngForOf",e.twoTableData),i(),l("ngModel",e.threeSelect)("nzPlaceHolder",e.$t("_sel3")),i(),l("ngForOf",e.threeTableData),i(2),$(" ",e.$t("_addWeb"),"\uFF08",e.websiteTableData.length,"\uFF09 "),i(2),C(" ",e.$t("_getErrorWeb")," "),i(),l("nzPopconfirmTitle",e.$t("_confirmDel"))("disabled",e.setOfCheckedId.size<=0),i(),C(" ",e.$t("_batchDel")," "),i(),l("nzData",e.websiteTableData)("nzShowPagination",!1),i(5),l("nzChecked",e.checkedAll),i(2),b(e.$t("_action")),i(2),b(e.$t("_status")),i(2),b(e.$t("_icon")),i(2),b(e.$t("_webName")),i(2),b(e.$t("_associatedLabels")),i(2),b(e.$t("_onlyOwnVisible")),i(2),b(e.$t("_webDesc")),i(2),b(e.$t("_webTag")),i(2),l("ngForOf",e.websiteTableData)}}var E=class c{constructor(n,e,t){this.modal=n;this.notification=e;this.message=t}$t=f;isSelfDevelop=H;settings=k;internal=J;websiteList=Y;gitRepoUrl=A.gitRepoUrl;isLogin=R;showCreateModal=!1;syncLoading=!1;uploading=!1;tabActive=0;editIdx=0;isEdit=!1;oneSelect="";twoSelect="";threeSelect="";checkedAll=!1;setOfCheckedId=new Set;errorWebs=[];ngOnInit(){}get oneIndex(){return this.websiteList.findIndex(n=>n.title===this.oneSelect)}get twoIndex(){try{return this.twoTableData.findIndex(n=>n.title===this.twoSelect)}catch{return-1}}get threeIndex(){try{return this.threeTableData.findIndex(n=>n.title===this.threeSelect)}catch{return-1}}get twoTableData(){try{return this.websiteList.find(n=>n.title===this.oneSelect)?.nav||[]}catch{return[]}}get threeTableData(){try{return this.twoTableData.find(n=>n.title===this.twoSelect)?.nav||[]}catch{return[]}}get websiteTableData(){try{let n=this.threeTableData.find(e=>e.title===this.threeSelect);return n?n.nav:this.errorWebs}catch{return this.errorWebs}}getAllErrorWeb(){this.oneSelect="",this.twoSelect="",this.threeSelect="",this.onTabChange();let n=[];function e(t){if(Array.isArray(t))for(let o=0;o<t.length;o++){let s=t[o];s.url&&s.ok===!1?n.push(s):e(s.nav)}}e(this.websiteList),this.errorWebs=n,n.length<=0?this.message.success("No error!"):this.message.warning(`\u68C0\u6D4B\u51FA ${n.length} \u4E2A\u7F51\u7AD9\u7591\u4F3C\u5F02\u5E38`)}onAllChecked(n,e){switch(this.setOfCheckedId.clear(),e){case 1:this.websiteList.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 2:this.twoTableData.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 3:this.threeTableData.forEach(t=>{n?this.setOfCheckedId.add(t.title):this.setOfCheckedId.delete(t.title)});break;case 4:this.websiteTableData.forEach(t=>{n?this.setOfCheckedId.add(t.name):this.setOfCheckedId.delete(t.name)});break}}onItemChecked(n,e){e?this.setOfCheckedId.add(n):this.setOfCheckedId.delete(n)}onBatchDelete(n){switch(n){case 1:this.setOfCheckedId.forEach(e=>{let t=this.websiteList.findIndex(o=>o.title===e);t>=0&&this.websiteList.splice(t,1)});break;case 2:this.oneIndex>=0&&(this.websiteList[this.oneIndex].nav=this.websiteList[this.oneIndex].nav.filter(e=>!this.setOfCheckedId.has(e.title)));break;case 3:this.oneIndex>=0&&this.twoIndex>=0&&(this.websiteList[this.oneIndex].nav[this.twoIndex].nav=this.websiteList[this.oneIndex].nav[this.twoIndex].nav.filter(e=>!this.setOfCheckedId.has(e.title)));break;case 4:{let e=[];this.websiteTableData.forEach(t=>{let o=!this.setOfCheckedId.has(t.name);return o||e.push(t),o}),e.forEach(t=>{y(t.id)}),this.errorWebs.length&&this.getAllErrorWeb(),this.message.success(f("_delSuccess"))}break}this.onTabChange(),v(this.websiteList)}handleReset(){this.modal.info({nzTitle:f("_resetInitData"),nzContent:f("_warnReset"),nzOnOk:()=>{this.message.success(f("_actionSuccess")),window.localStorage.removeItem(B.s_url),U().finally(()=>{window.location.reload()})}})}handleDownloadBackup(){let n={db:this.websiteList,settings:k,tag:G,search:j,component:K};for(let e in n)(0,Oe.saveAs)(new Blob([JSON.stringify(n[e])],{type:"text/plain;charset=utf-8"}),`${e}.json`)}handleUploadBackup(n){let e=this,t=n.target.files;if(t.length<=0)return;let o=t[0],s=new FileReader;s.readAsText(o),s.onload=function(x){try{let{result:z}=x.target;e.websiteList=JSON.parse(z),e.message.success(f("_actionSuccess")),v(e.websiteList).finally(()=>{location.reload()})}catch(z){e.notification.error(f("_error"),z.message)}}}goBack(){history.go(-1)}openMoveWebModal(n,e,t){I.emit("MOVE_WEB",{indexs:[this.oneIndex,this.twoIndex,this.threeIndex,e],data:[n],level:t})}openCreateWebModal(){if(this.tabActive===3&&!this.threeSelect)return this.message.error(f("_sel3"));I.emit("CREATE_WEB",{oneIndex:this.oneIndex,twoIndex:this.twoIndex,threeIndex:this.threeIndex})}openEditModal(n){I.emit("CREATE_WEB",{detail:n})}toggleCreateModal(){if(!this.showCreateModal){if(this.tabActive===1&&!this.oneSelect)return this.message.error(f("_sel1"));if(this.tabActive===2&&!this.twoSelect)return this.message.error(f("_sel2"))}this.isEdit=!1,I.emit("EDIT_CATEGORY_OPEN")}onTabChange(n){this.errorWebs=[],this.tabActive=n??this.tabActive,this.setOfCheckedId.clear(),this.checkedAll||setTimeout(()=>{this.checkedAll=!this.checkedAll,setTimeout(()=>{this.checkedAll=!this.checkedAll})})}handleConfirmDelOne(n){this.websiteList.splice(n,1),this.message.success(f("_delSuccess")),v(this.websiteList)}moveOneUp(n){if(n===0)return;let e=this.websiteList[n],t=this.websiteList[n-1];this.websiteList[n-1]=e,this.websiteList[n]=t,v(this.websiteList)}moveOneDown(n){if(n===this.websiteList.length-1)return;let e=this.websiteList[n],t=this.websiteList[n+1];this.websiteList[n+1]=e,this.websiteList[n]=t,v(this.websiteList)}moveTwoUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[n],t=this.websiteList[this.oneIndex].nav[n-1];this.websiteList[this.oneIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveTwoDown(n){try{if(n===this.websiteList[this.oneIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[n],t=this.websiteList[this.oneIndex].nav[n+1];this.websiteList[this.oneIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelTwo(n){this.twoTableData.splice(n,1),this.message.success(f("_delSuccess")),v(this.websiteList)}moveThreeUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n-1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveThreeDown(n){try{if(n===this.websiteList[this.oneIndex].nav[this.twoIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n+1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelThree(n){this.threeTableData.splice(n,1),this.message.success(f("_delSuccess")),v(this.websiteList)}moveWebUp(n){try{if(n===0)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n-1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}moveWebDown(n){try{if(n===this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav.length-1)return;let e=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n],t=this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1];this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n+1]=e,this.websiteList[this.oneIndex].nav[this.twoIndex].nav[this.threeIndex].nav[n]=t,v(this.websiteList)}catch(e){this.notification.error(f("_error"),e.message)}}handleConfirmDelWeb(n){y(n.id)&&(this.message.success(f("_delSuccess")),this.errorWebs.length&&this.getAllErrorWeb())}hanldeOneSelect(n){this.oneSelect=n??this.oneSelect,this.twoSelect="",this.threeSelect="",this.onTabChange()}hanldeTwoSelect(n){this.twoSelect=n??this.twoSelect,this.threeSelect="",this.onTabChange()}hanldeThreeSelect(n){this.threeSelect=n??this.threeSelect,this.onTabChange()}handleEditBtn(n,e){let{title:t,icon:o,name:s,ownVisible:x}=n;this.isEdit=!0,this.editIdx=e,I.emit("EDIT_CATEGORY_OPEN",{title:t||s,icon:o,ownVisible:x})}handleSync(){this.modal.info({nzTitle:f("_syncDataOut"),nzOkText:f("_confirmSync"),nzContent:f("_confirmSyncTip"),nzOnOk:()=>{this.syncLoading=!0,pe({message:"update db",content:JSON.stringify(this.websiteList),path:F}).then(()=>{this.message.success(f("_syncSuccessTip"))}).finally(()=>{this.syncLoading=!1})}})}handleOk(n){let{title:e,icon:t,ownVisible:o}=n;if(this.isEdit){switch(this.tabActive){case 0:{if(this.websiteList.some(x=>x.title===e)&&this.websiteList[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.websiteList[this.editIdx].title=e,this.websiteList[this.editIdx].icon=t,this.websiteList[this.editIdx].ownVisible=o}break;case 1:{if(this.twoTableData.some(x=>x.title===e)&&this.twoTableData[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.twoTableData[this.editIdx].title=e,this.twoTableData[this.editIdx].icon=t,this.twoTableData[this.editIdx].ownVisible=o}break;case 2:{if(this.threeTableData.some(x=>x.title===e)&&this.threeTableData[this.editIdx].title!==e)return this.message.error(`${f("_repeatAdd")} "${e}"`);this.threeTableData[this.editIdx].title=e,this.threeTableData[this.editIdx].icon=t,this.threeTableData[this.editIdx].ownVisible=o}break}this.message.success(f("_saveSuccess"))}else{let x={id:-Date.now(),title:e,icon:t,ownVisible:o,nav:[]};switch(this.tabActive){case 0:{if(this.websiteList.some(T=>T.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.websiteList.unshift(x)}break;case 1:{if(this.twoTableData.some(T=>T.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.twoTableData.unshift(x)}break;case 2:{if(this.threeTableData.some(T=>T.title===e))return this.message.error(`${f("_repeatAdd")} "${e}"`);this.threeTableData.unshift(x)}break}this.message.success(f("_addSuccess"))}v(this.websiteList)}static \u0275fac=function(e){return new(e||c)(S(fe),S(ze),S(xe))};static \u0275cmp=V({type:c,selectors:[["app-web"]],decls:12,vars:10,consts:[["rowSelectionTable","","basicTable",""],[1,"admin"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["nz-button","","style","margin: 0 15px 20px 15px",3,"click",4,"ngIf"],["nz-button","",2,"margin-right","15px",3,"click"],["id","file2","nz-button","","nz-tooltip","","nzTooltipPlacement","bottom",3,"nzTooltipTitle"],["type","file","name","file2","accept",".json",1,"file-upload",3,"change"],[1,"tip2"],[3,"nzSelectedIndex","nzSelectedIndexChange",4,"ngIf"],[3,"onOk","title"],["nz-button","","nzType","primary",3,"click","nzLoading"],["nz-button","",2,"margin","0 15px 20px 15px",3,"click"],[3,"nzSelectedIndexChange","nzSelectedIndex"],[3,"nzTitle"],["nz-button","","nzType","primary",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom","nz-button","","nzDanger","",1,"ml-2.5",3,"nzOnConfirm","nzPopconfirmTitle","disabled"],[2,"margin-top","15px",3,"nzData","nzShowPagination"],[3,"nzCheckedChange","nzChecked"],[4,"ngFor","ngForOf"],["nzShowSearch","",2,"width","260px",3,"ngModelChange","ngModel","nzPlaceHolder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"click"],["nzShowSearch","",2,"width","200px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","200px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nzShowSearch","",2,"width","150px","margin-left","15px",3,"ngModelChange","ngModel","nzPlaceHolder"],["nz-button","","nzType","primary",2,"margin-left","10px",3,"click"],["nz-button","","nzType","primary","nzDanger","",2,"margin","0 10px",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom","nz-button","","nzDanger","",3,"nzOnConfirm","nzPopconfirmTitle","disabled"],["nzWidth","70px",3,"nzCheckedChange","nzChecked"],["nzWidth","60px",1,"text-center"],["nzWidth","70px"],["nzWidth","80px"],["nzWidth","100px"],["nzWidth","120px"],["nzWidth","300px"],[3,"src","name"],["nz-icon","","nzType","check","nzTheme","outline",4,"ngIf"],[1,"select-none"],[3,"click"],[1,"ml-2.5",3,"click"],["nz-popconfirm","","nzPopconfirmPlacement","bottom",1,"color-red","ml-2.5",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-icon","","nzType","check","nzTheme","outline"],[3,"nzLabel","nzValue"],[1,"text-center","select-none"],[4,"ngIf"],["nz-popconfirm","","nzPopconfirmPlacement","bottom",1,"color-red",3,"nzOnConfirm","nzPopconfirmTitle"],["nz-icon","","nzType","close","nzTheme","outline","style","color: red",4,"ngIf"],[3,"src","name",4,"ngIf"],["target","_blank",3,"href"],[3,"data",4,"ngIf"],[1,"desc"],["nz-icon","","nzType","close","nzTheme","outline",2,"color","red"],[3,"data"]],template:function(e,t){e&1&&(r(0,"div",1),u(1,Ae,2,2,"button",2)(2,Fe,2,1,"button",3),r(3,"button",4),p("click",function(){return t.handleDownloadBackup()}),d(4),a(),r(5,"label",5),d(6),r(7,"input",6),p("change",function(s){return t.handleUploadBackup(s)}),a()(),r(8,"div",7),d(9),a(),u(10,st,107,77,"nz-tabset",8),a(),r(11,"edit-category",9),p("onOk",function(s){return t.handleOk(s)}),a()),e&2&&(i(),l("ngIf",!t.isSelfDevelop),i(),l("ngIf",!t.isSelfDevelop),i(2),C(" ",t.$t("_backup")," "),i(),l("nzTooltipTitle",t.$t("_importBackupTip")),i(),C(" ",t.$t("_importBackup")," "),i(3),C(" ",t.$t("_errCountTip",D(8,Pe,t.settings.errorUrlCount||0))," "),i(),l("ngIf",t.isLogin),i(),l("title",t.isEdit?t.$t("_edit"):t.$t("_add")))},dependencies:[Le,M,L,O,ae,re,ne,ee,te,ie,oe,Z,X,q,Q,de,Ee,Se,we,ge,ve,ye,Te,ke,Ie,De,$e,Ve,he,me,ce,se,le,_e,P,N,ue,We,Ce,be],styles:[".desc[_ngcontent-%COMP%]{width:300px;white-space:pre-wrap;word-break:break-all}#file2[_ngcontent-%COMP%]{position:relative;cursor:pointer}#file2[_ngcontent-%COMP%]   .file-upload[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:1px;opacity:0;cursor:pointer}.tip2[_ngcontent-%COMP%]{color:#f50;font-weight:700;margin-top:10px}.admin[_ngcontent-%COMP%]     .ant-table{max-height:600px;overflow:auto}"]})};export{E as default};
